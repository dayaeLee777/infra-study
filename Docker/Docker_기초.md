# Docker

## 목차
1. [**Docker란?**](#1)
2. [**Why Docker?**](#2)
3. [**Image**](#3)
4. [**Image vs Container**](#4)
5. [**Image 생명주기**](#5)
6. [**설치**](#6)
7. [**명령어**](#7)
8. [**도커 실행 및 옵션**](#8)

<br/>

<div id="1"></div>

### 💡 Docker란?
---
컨테이너 기반 가상화 도구

도커는 리눅스 상에서 컨테이너 방식으로 프로세스를 격리해서 실행하고 관리할 수 있도록 도와줌

도커를 사용하면 이미지를 기반으로 컨테이너를 실행할 수 있으며, 다시 특정 컨테이너의 상태를 변경하여 이미지도 만들 수 있음

이미지는 파일로 보관하거나 원격저장서를 사용해 쉽게 공유 가능

도커만 설치되어 있다면 필요할 때 언제 어디서나 컨테이너로 실행가능


<div id="2"></div>

### 💡 Why Docker?
---
OS환경에 구애받지 않고 동일한 동작을 보장하는 불변서버로 이미지를 굽는 것과 같다.

가상머신의 역할을 넘어서 어느 플랫폼에서나 특정한 상태를 그대로 재현가능한 애플리케이션 컨테이너를 관리할 수 있다.

도커 허브에서 필요한 서비스를 `docker run` 명령어를 사용하여 손쉽게 컨테이너를 구동할 수 있다.

<div id="3"></div>

### 💡 Image
---
이미지는 가상머신에서 사용하는 이미지와 비슷한 역할을 수행

**어떤 애플리케이션을 실행하기 위한 환경**이며 이 환경은 파일들의 집합이다.

도커에서는 애플리케이션을 실행하기 위한 파일들을 모아놓고, 애플리케이션과 함께 이미지로 만들 수 있습니다. 그리고 이 이미지를 기반으로 애플리케이션을 바로 배포할 수 있습니다.

> 1. 도커 레포지토리에서 centos 이미지를 풀(pull) 받는다. <br/>
> 2. 이 이미지를 통해서 컨테이너를 실행한다.

<div id="4"></div>

### ⭐ Image vs Container
---
> **이미지** 미리 구성된 환경을 저장해 놓은 **파일들의 집합** <br/>
> **컨테이너** 이러한 이미지를 기반으로 실행된 격리된 **프로세스**

컨테이너를 아무리 많은 작업을 해도 이미지에는 아무런 변화가 없다.

CD로 프로그램을 설치하고 프로그램에 많은 변화를 주어도 CD는 어떠한 변화도 생기지 않는 것과 같은 것

<div id="5"></div>

### 💡 Image 생명주기
---
이미지는 불변이지만, 그 대신 도커에서는 이 이미지 위에 무언가를 더해서 새로운 이미지를 만들어내는 일이 가능합니다.

특정한 이미지로부터 생성된 컨테이너에 어떤 변경사항을 더하고(파일들을 변경하고), 이 변경된 상태를 새로운 이미지로 만들어내는 것이 가능합니다.

<div id="6"></div>

### 💡 설치
---
```bash
curl -s https://get.docker.com | sudo sh
```

<div id="7"></div>

### 💡 명령어
---
```bash
# 도커 버전 확인
docker -v

# 컨테이너 실행
docker run [이미지이름:태그]

# 컨테이너 조회
docker ps -a
# -a : 종료된 컨테이너까지 조회

# 컨테이너 삭제
# -f : 실행중인 컨테이너 강제 삭제 가능
docker rm [컨테이너 ID 또는 NAME]

# 도커 이미지 조회
docker images

# 도커 이미지 삭제
docker rmi [이미지ID 또는 이미지명]

# 컨테이너 시작/종료/재시작
docker start/stop/restart [컨테이너 ID 또는 NAME]

```

<div id="8"></div>

### 💡 Jenkins를 이용한 도커 run 및 옵션 알아보기
---
```bash
docker run --name myjenkins -d -p 9080:8080 jenkins/jenkins
# 옵션
# -d : 백그라운드 데몬으로 실행시키는 옵션
# -p : 가상머신에서 동작하는 서비스에 docker proxy 서비스가 NAT 기능을 수행해 포트 포워딩을 해주어 실제머신 IP로 서비스에 접속이 가능하도록 해준다.
# --name : 컨테이너 이름 지정, 지정하지않으면 자동부여

docker exec -it myjenkins bash 
# 옵션
# -i : interactive 모드로 표준입출력을 키보드와 화면을 통해 가능하도록 하는 옵션
# -t : 텍스트 기반의 터미널(TTY)에 에뮬레이션 해주는 옵션
```